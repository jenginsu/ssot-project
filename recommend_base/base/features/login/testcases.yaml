feature_id: login
testcases:
- id: TC_LOGIN_001
  name: 정상 로그인
  request:
    method: POST
    path: /api/login_api
    body:
      email: user1@example.com
      password: Pass@word1
  expected:
    http_status: 200
    body:
      has_fields:
      - accessToken
      - userId
- id: TC_LOGIN_002
  name: 잘못된 비밀번호
  request:
    method: POST
    path: /api/login_api
    body:
      email: user1@example.com
      password: WrongPass!1
  expected:
    http_status: 401
    body:
      errorCode: LOGIN_FAILED
- id: TC_LOGIN_003
  name: 비밀번호 형식 오류
  request:
    method: POST
    path: /api/login_api
    body:
      email: user1@example.com
      password: short
  expected:
    http_status: 400
    body:
      errorCode: INVALID_PASSWORD_FORMAT
- id: TC_LOGIN_004
  name: 5회 연속 로그인 실패 후 계정 잠김
  precondition: DB에 user1@example.com / Pass@word1 계정이 존재하고, 초기 fail_count = 0, is_locked
    = false 상태여야 함.
  steps:
  - description: 1~4번째 로그인 실패 (LOGIN_FAILED 유지)
    repeat: 4
    request:
      method: POST
      path: /api/login_api
      body:
        email: user1@example.com
        password: WrongPass!1
    expected:
      http_status: 401
      body:
        errorCode: LOGIN_FAILED
  - description: 5번째 로그인 실패 시 계정 잠김 발생
    request:
      method: POST
      path: /api/login_api
      body:
        email: user1@example.com
        password: WrongPass!1
    expected:
      http_status: 401
      body:
        errorCode: ACCOUNT_LOCKED
- id: TC_LOGIN_005
  name: 잠긴 계정으로 로그인 시도
  precondition: DB에 user1@example.com 계정이 is_locked = true 상태여야 함.
  request:
    method: POST
    path: /api/login_api
    body:
      email: user1@example.com
      password: Pass@word1
  expected:
    http_status: 401
    body:
      errorCode: ACCOUNT_LOCKED
- id: TC_LOGIN_006
  name: 이메일 형식 오류
  request:
    method: POST
    path: /api/login_api
    body:
      email: invalid-email-format
      password: Pass@word1
  expected:
    http_status: 400
    body:
      errorCode: INVALID_EMAIL_FORMAT
- id: TC_LOGIN_007
  name: 이메일 누락
  request:
    method: POST
    path: /api/login_api
    body:
      password: Pass@word1
  expected:
    http_status: 400
    body:
      errorCode: MISSING_REQUIRED_FIELD
- id: TC_LOGIN_008
  name: 비밀번호 누락
  request:
    method: POST
    path: /api/login_api
    body:
      email: user1@example.com
  expected:
    http_status: 400
    body:
      errorCode: MISSING_REQUIRED_FIELD
- id: TC_LOGIN_009
  name: 존재하지 않는 이메일로 로그인 시도
  request:
    method: POST
    path: /api/login_api
    body:
      email: notfound@example.com
      password: Pass@word1
  expected:
    http_status: 401
    body:
      errorCode: LOGIN_FAILED
