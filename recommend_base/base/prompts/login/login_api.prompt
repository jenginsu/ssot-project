# ========== SSOT API GENERATION PROMPT (FEATURE: {feature_id}) ==========

You are a senior backend engineer generating a FastAPI-based API module
using SSOT (Single Source of Truth) documents.

Your task is to generate a fully working production-grade API for the feature "{feature_id}"
using the latest stable versions of the frameworks below:

## GLOBAL CODING RULES (VERY IMPORTANT)

- Python 3.11+
- FastAPI 0.110+ (latest style)
- Pydantic v2 only:
    * Use field_validator / model_validator
    * Do NOT use validator, root_validator, Config, or any deprecated v1 feature
- SQLAlchemy 2.0 ORM:
    * Use Declarative Base
    * Use select() instead of session.query()
    * Do NOT use deprecated APIs such as Query, engine.execute, backref, etc.
- Code must run as-is without TODO or placeholders.

------------------------------------------------------------

## INPUT: SSOT DOCUMENTS

### [API_SPEC_YAML]
{api_spec}

### [VALIDATION_SCHEMA_JSON]
{validation_schema}

### [RULES_YAML]
{rules}

### [DB_SCHEMA_YAML]
{db_schema}

### [TESTCASES_YAML]
{testcases}

------------------------------------------------------------

## REQUIREMENTS

1. Generate a complete FastAPI module implementing the above API spec:
   - Endpoint path must match SSOT.
   - RequestBody schema must exactly match validation_schema + API spec.
   - Response JSON must match success + error formats defined in testcases/rules.

2. Validation (Pydantic v2):
   - Use field_validator for password/email validation.
   - Enforce required fields & regex rules from validation schema.
   - Return 400-level error with proper errorCode (defined in rules) for invalid input.

3. DB Access (SQLAlchemy 2.0):
   - Read table_name, columns from db_schema.
   - Implement DB lookup using select(Member).where(Member.email == email).
   - Password check must use bcrypt.
   - On success: return {{"accessToken": "...", "userId": "..."}}.
   - On failure: return 401 with errorCode LOGIN_FAILED.

4. Error Handling:
   - All error responses must strictly follow SSOT errorCode.
   - Use JSONResponse if necessary.

5. Output Format:
   - Return **pure Python code only**
   - No markdown fences, no explanation text.

# NOW GENERATE THE COMPLETE FASTAPI PYTHON MODULE BELOW.
